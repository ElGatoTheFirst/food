<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1,viewport-fit=cover" />
  <meta name="theme-color" content="#0b0f19" />
  <title>Food Freshness Classifier</title>

  <!-- IMPORTANT: absolute path + cache buster -->
  <link rel="stylesheet" href="/style.css?v=3" />
</head>

<body>
  <header class="topbar">
    <div class="brand">
      <div class="logo" aria-hidden="true">üçé</div>
      <div class="brand-text">
        <h1>Food Classifier</h1>
        <p class="sub">1 frame/sec ‚Ä¢ 1 verdict/min</p>
      </div>
    </div>

    <div class="actions">
      <button id="startBtn" class="btn primary">Start</button>
      <button id="stopBtn" class="btn" disabled>Stop</button>
      <button id="switchBtn" class="btn" title="Switch camera">Switch</button>
    </div>
  </header>

  <main class="wrap">
    <section class="card camera-card">
      <div class="card-head">
        <h2>Camera</h2>
        <div class="status">
          <span class="dot" id="statusDot" aria-hidden="true"></span>
          <span id="statusText">Idle</span>
        </div>
      </div>

      <div class="camera">
        <video id="video" playsinline muted></video>

        <div class="overlay">
          <div class="pill">
            <span class="pill-label">Next verdict in</span>
            <span id="countdown" class="pill-value">60s</span>
          </div>
        </div>
      </div>

      <div class="hint" id="hint">
        Tip: On phones, allow camera permission. Use ‚ÄúSwitch‚Äù for front/back camera.
      </div>

      <!-- hidden canvas for capturing frames -->
      <canvas id="canvas" class="hidden" width="640" height="640"></canvas>
    </section>

    <section class="grid">
      <section class="card">
        <div class="card-head">
          <h2>Live (latest frame)</h2>
          <span class="badge" id="liveBadge">‚Äî</span>
        </div>

        <div class="big">
          <div class="big-label" id="liveLabel">Waiting‚Ä¶</div>
          <div class="big-sub" id="liveConf">Confidence: ‚Äî</div>
        </div>

        <div class="sep"></div>

        <h3 class="small-title">Top-K (this frame)</h3>
        <ol id="topKList" class="list"></ol>

        <div class="error" id="errorBox" hidden></div>
      </section>

      <section class="card">
        <div class="card-head">
          <h2>Minute verdict</h2>
          <span class="badge ok" id="minuteBadge">‚Äî</span>
        </div>

        <div class="big">
          <div class="big-label" id="minuteLabel">‚Äî</div>
          <div class="big-sub" id="minuteMeta">Collecting frames‚Ä¶</div>
        </div>

        <div class="sep"></div>

        <h3 class="small-title">Last verdicts</h3>
        <ul id="historyList" class="history"></ul>
      </section>
    </section>
  </main>

  <footer class="foot">
    <span class="muted">API:</span>
    <code id="apiShow">‚Äî</code>
  </footer>

  <script>
    // REQUIRED by you:
    window.API_BASE = "https://elgatito1-food-classifier.hf.space";
  </script>

  <!-- IMPORTANT: absolute path + cache buster -->
  <script src="/app.js?v=3" defer></script>
</body>
</html>
